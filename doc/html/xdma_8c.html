<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Kintex-7: xdma/xdma.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kintex-7</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_1c64272130d509cdb89bf3690093e211.html">xdma</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xdma.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;linux/string.h&gt;</code><br/>
<code>#include &lt;linux/kernel.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="xbasic__types_8h_source.html">xbasic_types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xdebug_8h_source.html">xdebug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xstatus_8h_source.html">xstatus.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xio_8h_source.html">xio.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xdma_8h_source.html">xdma.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xdma__hw_8h_source.html">xdma_hw.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdma_8c.html#aa54ebea9ca5df43d8b76583c42272ed6">Dma_Initialize</a> (<a class="el" href="structDma__Engine.html">Dma_Engine</a> *InstancePtr, u32 BaseAddress, u32 Type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdma_8c.html#aa95c53b30b03661caea5e5c1279acd58">Dma_Reset</a> (<a class="el" href="structDma__Engine.html">Dma_Engine</a> *InstancePtr)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This file implements initialization and control related functions. For more information on this driver, see <a class="el" href="xdma_8h.html">xdma.h</a>.</p>
<p>MODIFICATION HISTORY:</p>
<p>Ver Date Changes ----- ------- ----------------------------------------------------------- 1.0 5/15/12 First release </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa54ebea9ca5df43d8b76583c42272ed6"></a><!-- doxytag: member="xdma.c::Dma_Initialize" ref="aa54ebea9ca5df43d8b76583c42272ed6" args="(Dma_Engine *InstancePtr, u32 BaseAddress, u32 Type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dma_Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDma__Engine.html">Dma_Engine</a> *&#160;</td>
          <td class="paramname"><em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>BaseAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>Type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function initializes a DMA engine. This function must be called prior to using the DMA engine. Initialization of an engine includes setting up the register base address, setting up the instance data, and ensuring the hardware is in a quiescent state.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">InstancePtr</td><td>is a pointer to the DMA engine instance to be worked on. </td></tr>
    <tr><td class="paramname">BaseAddress</td><td>is where the registers for this engine can be found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None. </dd></dl>

<p>References <a class="el" href="structDma__Engine.html#a908c7a2313424f11f5b61ba6bc3bdffc">Dma_Engine::BdRing</a>, <a class="el" href="xdma__hw_8h.html#a41e2e217156dc469aad7b4526df2c26a">DMA_ENG_C2S</a>, <a class="el" href="xdma_8c.html#aa95c53b30b03661caea5e5c1279acd58">Dma_Reset()</a>, <a class="el" href="structDma__Engine.html#a4be2947a1ed70fe05e1f81931718e5b9">Dma_Engine::EngineState</a>, <a class="el" href="xdma__user_8h.html#a05b386d4bad60f6f9236de6d3be866e0">INITIALIZED</a>, <a class="el" href="structDma__BdRing.html#a34fc2edc4af4dd44fca74e3b14632436">Dma_BdRing::IsRxChannel</a>, <a class="el" href="structDma__Engine.html#a9b0aae4ccf485f4204eb3b52f9831051">Dma_Engine::RegBase</a>, <a class="el" href="structDma__BdRing.html#a540cdbb6a270d29c8761f1b7bc501a8c">Dma_BdRing::RunState</a>, and <a class="el" href="structDma__Engine.html#a612698b11c13741cff6226f9b28b5850">Dma_Engine::Type</a>.</p>

</div>
</div>
<a class="anchor" id="aa95c53b30b03661caea5e5c1279acd58"></a><!-- doxytag: member="xdma.c::Dma_Reset" ref="aa95c53b30b03661caea5e5c1279acd58" args="(Dma_Engine *InstancePtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dma_Reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDma__Engine.html">Dma_Engine</a> *&#160;</td>
          <td class="paramname"><em>InstancePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset the DMA engine.</p>
<p>Should not be invoked during initialization stage because hardware has just come out of a system reset. Should be invoked during shutdown stage.</p>
<p>New BD fetches will stop immediately. Reset will be completed once the user logic completes its reset. DMA disable will be completed when the BDs already being processed are completed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">InstancePtr</td><td>is a pointer to the DMA engine instance to be worked on.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>If the hardware is not working properly, and the self-clearing reset bits do not clear, this function will be terminated after a timeout. </li>
</ul>
</dd></dl>

<p>References <a class="el" href="xdma__hw_8h.html#a37910edf29311f45769405926ad155df">DMA_ENG_ALLINT_MASK</a>, <a class="el" href="xdma__hw_8h.html#aa70f01b87ef40158a47446e97178a724">DMA_ENG_DISABLE</a>, <a class="el" href="xdma__hw_8h.html#a061bcafaef1fba7222c2d9e2e0360372">DMA_ENG_INT_ACTIVE_MASK</a>, <a class="el" href="xdma__hw_8h.html#a5c1b4110e7a206f1069389047fa5b306">DMA_ENG_RESET</a>, <a class="el" href="xdma__hw_8h.html#afdb7ed8a43c5fc824ec304a9d9f6084b">DMA_ENG_STATE_MASK</a>, <a class="el" href="xdma__hw_8h.html#a18413b82dd90655671951e7ba010410e">DMA_ENG_USER_RESET</a>, <a class="el" href="xdma__hw_8h.html#adad32f115a24f9a40adb83ec0c23a806">Dma_mEngIntAck</a>, <a class="el" href="xdma__hw_8h.html#a25aec48cb84f6dc47a916af0fd470675">Dma_mEngIntDisable</a>, <a class="el" href="xdma__hw_8h.html#a8eb26add3d4bf0f08966d06eef797f55">Dma_mGetCrSr</a>, <a class="el" href="xdma__bdring_8h.html#ab9919719ea54bfeab2586cf06b316731">Dma_mGetRing</a>, <a class="el" href="xdma__hw_8h.html#aa6445c055757dd40f2df51355569b392">Dma_mSetCrSr</a>, and <a class="el" href="structDma__BdRing.html#a540cdbb6a270d29c8761f1b7bc501a8c">Dma_BdRing::RunState</a>.</p>

<p>Referenced by <a class="el" href="xdma_8h.html#aa54ebea9ca5df43d8b76583c42272ed6">Dma_Initialize()</a>, and <a class="el" href="xdma__user_8c.html#a4104c7117330f48cb334c5c08538ad8e">DmaUnregister()</a>.</p>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue May 8 2012 18:55:49 for Kintex-7 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
